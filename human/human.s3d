#ifndef HUMAN_H
#define HUMAN_H

#include "body.s3d"
#include "def.s3d"
#include "view.s3d"

class Human
{
	var m_parts;
	
	getView();
	processCommands(queue);
	processCommand(command);	
};

function Human::Human(startPosition) {
	m_parts = Array(N_PARTS);
	
	// Root of the human character
	var pBody = Body();
	pBody.setPosition(startPosition);
	
	m_parts[BODY_ID] = pBody;
}

function Human::getView() {
	var body = m_parts[BODY_ID];
	
	var pView = View();
	pView.position = body.getPosition();
	pView.direction = body.getDirection();
	
	return pView;
}

function Human::processCommand(command) {
	command.action().apply(m_parts[command.target()]);
}

function Human::processCommands(queue) {
	while (!queue.isEmpty()) {
		processCommand(queue.pop());
	}
}

#endif // HUMAN_H
